#!/bin/bash
. /root/.bashrc

# shellcheck disable=SC2164
cd /opt/justMIME/

function gradle_launch() {
    # shellcheck disable=SC2086
    $1/gradlew -c lib/settings.gradle.kts "$2"
}

function generate() {
    gradle_launch lib :generator:run
    cp lib/generator/build/generated/ListTypes.kt lib/src/commonMain/kotlin/ListTypes.kt 1>/dev/null 2>&1
}

case $1 in
  bash)
    bash
    ;;
  generate)
    generate
    ;;
  lib)
    gradle_launch lib "$2"
    ;;
  build)
#    if ! "$TODO"
#    then
#      exit
#    fi
    ;;
esac
